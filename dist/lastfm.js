!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("chalk"),require("process"),require("cross-fetch"),require("continuation-local-storage")):"function"==typeof define&&define.amd?define(["chalk","process","cross-fetch","continuation-local-storage"],e):"object"==typeof exports?exports.lastfm=e(require("chalk"),require("process"),require("cross-fetch"),require("continuation-local-storage")):t.lastfm=e(t.chalk,t.process,t["cross-fetch"],t["continuation-local-storage"])}(window,function(t,e,r,n){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=19)}([,function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict";r.r(e),r.d(e,"newLogger",function(){return c});var n=r(1),o=r.n(n),i=r(2);function u(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(t){var e=function(t){var e=t.split("").map(function(t){return t.charCodeAt(0)}).reduce(function(t,e){return t+e},0)%360;return i.browser?{text:"%c".concat(t,"%c"),args:["font-weight: bold; color: hsl(".concat(e,", 100%, 30%)"),"font-weight: normal; color: inherit"]}:{text:o.a.hsl(e,100,30).bold(t),args:[]}}(t);return function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=n[0],c=n.slice(1);(t=console).log.apply(t,["".concat((new Date).toISOString()," ").concat(e.text," ").concat(i)].concat(u(e.args),u(c)))}}},,function(t,e){t.exports=r},,function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=r},function(t,e,r){!function(){var e=r(13),n=r(7).utf8,o=r(14),i=r(7).bin,u=function(t,r){t.constructor==String?t=r&&"binary"===r.encoding?i.stringToBytes(t):n.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var c=e.bytesToWords(t),a=8*t.length,s=1732584193,f=-271733879,l=-1732584194,p=271733878,h=0;h<c.length;h++)c[h]=16711935&(c[h]<<8|c[h]>>>24)|4278255360&(c[h]<<24|c[h]>>>8);c[a>>>5]|=128<<a%32,c[14+(a+64>>>9<<4)]=a;var g=u._ff,y=u._gg,b=u._hh,m=u._ii;for(h=0;h<c.length;h+=16){var d=s,v=f,w=l,T=p;f=m(f=m(f=m(f=m(f=b(f=b(f=b(f=b(f=y(f=y(f=y(f=y(f=g(f=g(f=g(f=g(f,l=g(l,p=g(p,s=g(s,f,l,p,c[h+0],7,-680876936),f,l,c[h+1],12,-389564586),s,f,c[h+2],17,606105819),p,s,c[h+3],22,-1044525330),l=g(l,p=g(p,s=g(s,f,l,p,c[h+4],7,-176418897),f,l,c[h+5],12,1200080426),s,f,c[h+6],17,-1473231341),p,s,c[h+7],22,-45705983),l=g(l,p=g(p,s=g(s,f,l,p,c[h+8],7,1770035416),f,l,c[h+9],12,-1958414417),s,f,c[h+10],17,-42063),p,s,c[h+11],22,-1990404162),l=g(l,p=g(p,s=g(s,f,l,p,c[h+12],7,1804603682),f,l,c[h+13],12,-40341101),s,f,c[h+14],17,-1502002290),p,s,c[h+15],22,1236535329),l=y(l,p=y(p,s=y(s,f,l,p,c[h+1],5,-165796510),f,l,c[h+6],9,-1069501632),s,f,c[h+11],14,643717713),p,s,c[h+0],20,-373897302),l=y(l,p=y(p,s=y(s,f,l,p,c[h+5],5,-701558691),f,l,c[h+10],9,38016083),s,f,c[h+15],14,-660478335),p,s,c[h+4],20,-405537848),l=y(l,p=y(p,s=y(s,f,l,p,c[h+9],5,568446438),f,l,c[h+14],9,-1019803690),s,f,c[h+3],14,-187363961),p,s,c[h+8],20,1163531501),l=y(l,p=y(p,s=y(s,f,l,p,c[h+13],5,-1444681467),f,l,c[h+2],9,-51403784),s,f,c[h+7],14,1735328473),p,s,c[h+12],20,-1926607734),l=b(l,p=b(p,s=b(s,f,l,p,c[h+5],4,-378558),f,l,c[h+8],11,-2022574463),s,f,c[h+11],16,1839030562),p,s,c[h+14],23,-35309556),l=b(l,p=b(p,s=b(s,f,l,p,c[h+1],4,-1530992060),f,l,c[h+4],11,1272893353),s,f,c[h+7],16,-155497632),p,s,c[h+10],23,-1094730640),l=b(l,p=b(p,s=b(s,f,l,p,c[h+13],4,681279174),f,l,c[h+0],11,-358537222),s,f,c[h+3],16,-722521979),p,s,c[h+6],23,76029189),l=b(l,p=b(p,s=b(s,f,l,p,c[h+9],4,-640364487),f,l,c[h+12],11,-421815835),s,f,c[h+15],16,530742520),p,s,c[h+2],23,-995338651),l=m(l,p=m(p,s=m(s,f,l,p,c[h+0],6,-198630844),f,l,c[h+7],10,1126891415),s,f,c[h+14],15,-1416354905),p,s,c[h+5],21,-57434055),l=m(l,p=m(p,s=m(s,f,l,p,c[h+12],6,1700485571),f,l,c[h+3],10,-1894986606),s,f,c[h+10],15,-1051523),p,s,c[h+1],21,-2054922799),l=m(l,p=m(p,s=m(s,f,l,p,c[h+8],6,1873313359),f,l,c[h+15],10,-30611744),s,f,c[h+6],15,-1560198380),p,s,c[h+13],21,1309151649),l=m(l,p=m(p,s=m(s,f,l,p,c[h+4],6,-145523070),f,l,c[h+11],10,-1120210379),s,f,c[h+2],15,718787259),p,s,c[h+9],21,-343485551),s=s+d>>>0,f=f+v>>>0,l=l+w>>>0,p=p+T>>>0}return e.endian([s,f,l,p])};u._ff=function(t,e,r,n,o,i,u){var c=t+(e&r|~e&n)+(o>>>0)+u;return(c<<i|c>>>32-i)+e},u._gg=function(t,e,r,n,o,i,u){var c=t+(e&n|r&~n)+(o>>>0)+u;return(c<<i|c>>>32-i)+e},u._hh=function(t,e,r,n,o,i,u){var c=t+(e^r^n)+(o>>>0)+u;return(c<<i|c>>>32-i)+e},u._ii=function(t,e,r,n,o,i,u){var c=t+(r^(e|~n))+(o>>>0)+u;return(c<<i|c>>>32-i)+e},u._blocksize=16,u._digestsize=16,t.exports=function(t,r){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var n=e.wordsToBytes(u(t,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):e.bytesToHex(n)}}()},function(t,e,r){"use strict";var n=["h","min","s","ms","Î¼s","ns"],o=["hour","minute","second","millisecond","microsecond","nanosecond"],i=[3600,60,1,1e6,1e3,1];t.exports=function(t,e){var r,u,c,a,s,f,l,p,h;if(r=!1,u=!1,e&&(r=e.verbose||!1,u=e.precise||!1),!Array.isArray(t)||2!==t.length)return"";if("number"!=typeof t[0]||"number"!=typeof t[1])return"";for(t[1]<0&&(h=t[0]+t[1]/1e9,t[0]=parseInt(h),t[1]=1e9*parseFloat((h%1).toPrecision(9))),p="",c=0;c<6&&(a=t[c<3?0:1],3!==c&&0!==c&&(a%=i[c-1]),2===c&&(a+=t[1]/1e9),!((s=a/i[c])>=1)||(r&&(s=Math.floor(s)),u?l=s.toString():(f=s>=10?0:2,l=s.toFixed(f)),l.indexOf(".")>-1&&"0"===l[l.length-1]&&(l=l.replace(/\.?0+$/,"")),p&&(p+=" "),p+=l,r?(p+=" "+o[c],"1"!==l&&(p+="s")):p+=" "+n[c],r));c++);return p}},function(t,e){t.exports=n},,function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var a,s=[],f=!1,l=-1;function p(){f&&a&&(f=!1,a.length?s=a.concat(s):l=-1,s.length&&h())}function h(){if(!f){var t=c(p);f=!0;for(var e=s.length;e;){for(a=s,s=[];++l<e;)a&&a[l].run();l=-1,e=s.length}a=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new g(t,e)),1!==s.length||f||c(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?r.push(e.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(n))>>>6-2*o);return r}};t.exports=r}()},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},,function(t,e,r){"use strict";(function(t){r.d(e,"a",function(){return d});var n=r(8),o=r.n(n),i=r(5),u=r.n(i),c=r(9),a=r.n(c),s=r(10),f=r(3);function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){p(t,e,r[e])})}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e,r,n,o,i,u){try{var c=t[i](u),a=c.value}catch(t){return void r(t)}c.done?e(a):Promise.resolve(a).then(n,o)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=Object(f.newLogger)("phnq.lastfm"),b=Object(s.createNamespace)("request"),m=function(t){var e=t;Object.keys(e).forEach(function(r){void 0===t[r]&&delete e[r]})},d=function(){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiKey=t,this.cache=r}return function(t,e,r){e&&g(t.prototype,e),r&&g(t,r)}(e,[{key:"req",value:function(){var e=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){h(i,n,o,u,c,"next",t)}function c(t){h(i,n,o,u,c,"throw",t)}u(void 0)})}}(regeneratorRuntime.mark(function e(r,n){var i,c,s,f,p,h,g,d,v,w,T,x,O,j,k=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.apiKey){e.next=2;break}throw new Error("No apiKey set.");case 2:if(m(n),i=b.get("cacheConfig")||{disabled:!1},c=!!this.cache&&!i.disabled,s=o()(JSON.stringify(l({},n,{method:r}))),!c){e.next=13;break}return e.next=9,this.cache.get(s);case 9:if(!(f=e.sent)){e.next=13;break}return y("CACHE %s %o",r,n),e.abrupt("return",f);case 13:return p=l({method:r,format:"json",api_key:this.apiKey},n),h=Object.keys(p).sort().map(function(t){return[t,encodeURIComponent(p[t])].join("=")}).join("&"),g="".concat("https://ws.audioscrobbler.com/2.0/","?").concat(h),d=t.hrtime(),e.next=19,u()(g);case 19:return v=e.sent,e.next=22,v.json();case 22:if(w=e.sent,y("%s %d %s %o",a()(t.hrtime(d)),v.status,r,n),!w.error){e.next=26;break}throw new Error("LastFM: ".concat(w.message));case 26:for(T=k.length,x=new Array(T>2?T-2:0),O=2;O<T;O++)x[O-2]=k[O];return j=x.reduce(function(t,e){return t[e]},w),c&&this.cache.put(s,j),e.abrupt("return",j);case 30:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}]),e}()}).call(this,r(12))},,,function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return s});var n=r(16);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,c(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,n["a"]),function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(e,[{key:"getArtistInfo",value:function(t){var e=t.mbid,r=t.artist;return this.req("artist.getinfo",{mbid:e,artist:r},"artist")}},{key:"getArtistTopTags",value:function(t){return this.req("artist.gettoptags",{artist:t},"toptags","tag")}},{key:"getArtistTopAlbums",value:function(t){return this.req("artist.gettopalbums",{artist:t},"topalbums","album")}},{key:"getAlbumTopTags",value:function(t,e){return this.req("album.gettoptags",{artist:t,album:e},"toptags","tag")}},{key:"getSimilarArtists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.req("artist.getsimilar",{artist:t,autocorrect:1,limit:e},"similarartists","artist")}},{key:"getTagInfo",value:function(t){return this.req("tag.getInfo",{tag:t},"tag")}},{key:"getSimilarTags",value:function(t){return this.req("tag.getsimilar",{tag:t},"similartags","tag")}},{key:"getTagTopArtists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.req("tag.gettopartists",{tag:t,limit:e},"topartists","artist")}},{key:"getTagTopTracks",value:function(t){return this.req("tag.gettoptracks",{tag:t,limit:15},"tracks","track")}}]),e}()}])});