!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("chalk"),require("process"),require("cross-fetch"),require("md5"),require("pretty-hrtime"),require("continuation-local-storage")):"function"==typeof define&&define.amd?define(["chalk","process","cross-fetch","md5","pretty-hrtime","continuation-local-storage"],e):"object"==typeof exports?exports.lastfm=e(require("chalk"),require("process"),require("cross-fetch"),require("md5"),require("pretty-hrtime"),require("continuation-local-storage")):t.lastfm=e(t.chalk,t.process,t["cross-fetch"],t.md5,t["pretty-hrtime"],t["continuation-local-storage"])}(window,function(t,e,r,n,o,i){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=17)}([,function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict";r.r(e),r.d(e,"newLogger",function(){return c});var n=r(1),o=r.n(n),i=r(2);function u(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(t){var e=function(t){var e=t.split("").map(function(t){return t.charCodeAt(0)}).reduce(function(t,e){return t+e},0)%360;return i.browser?{text:"%c".concat(t,"%c"),args:["font-weight: bold; color: hsl(".concat(e,", 100%, 30%)"),"font-weight: normal; color: inherit"]}:{text:o.a.hsl(e,100,30).bold(t),args:[]}}(t);return function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=n[0],c=n.slice(1);(t=console).log.apply(t,["".concat((new Date).toISOString()," ").concat(e.text," ").concat(i)].concat(u(e.args),u(c)))}}},function(t,e){t.exports=r},,,function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var a,s=[],f=!1,l=-1;function p(){f&&a&&(f=!1,a.length?s=a.concat(s):l=-1,s.length&&h())}function h(){if(!f){var t=c(p);f=!0;for(var e=s.length;e;){for(a=s,s=[];++l<e;)a&&a[l].run();l=-1,e=s.length}a=null,f=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new y(t,e)),1!==s.length||f||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=i},,,,function(t,e,r){"use strict";(function(t){r.d(e,"a",function(){return d});var n=r(7),o=r.n(n),i=r(4),u=r.n(i),c=r(8),a=r.n(c),s=r(10),f=r(3);function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){p(t,e,r[e])})}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e,r,n,o,i,u){try{var c=t[i](u),a=c.value}catch(t){return void r(t)}c.done?e(a):Promise.resolve(a).then(n,o)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=Object(f.newLogger)("phnq.lastfm"),m=Object(s.createNamespace)("request"),b=function(t){var e=t;Object.keys(e).forEach(function(r){void 0===t[r]&&delete e[r]})},d=function(){function e(t,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiKey=t,this.cache=r}return function(t,e,r){e&&y(t.prototype,e),r&&y(t,r)}(e,[{key:"req",value:function(){var e=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){h(i,n,o,u,c,"next",t)}function c(t){h(i,n,o,u,c,"throw",t)}u(void 0)})}}(regeneratorRuntime.mark(function e(r,n){var i,c,s,f,p,h,y,d,v,w,O,T,j,k,x=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.apiKey){e.next=2;break}throw new Error("No apiKey set.");case 2:if(b(n),i=m.get("cacheConfig")||{disabled:!1},c=!!this.cache&&!i.disabled,s=o()(JSON.stringify(l({},n,{method:r}))),!c){e.next=13;break}return e.next=9,this.cache.get(s);case 9:if(!(f=e.sent)){e.next=13;break}return g("CACHE %s %o",r,n),e.abrupt("return",f);case 13:return p=l({method:r,format:"json",api_key:this.apiKey},n),h=Object.keys(p).sort().map(function(t){return[t,encodeURIComponent(p[t])].join("=")}).join("&"),y="".concat("https://ws.audioscrobbler.com/2.0/","?").concat(h),d=t.hrtime(),e.next=19,u()(y);case 19:return v=e.sent,e.next=22,v.json();case 22:if(w=e.sent,g("%s %d %s %o",a()(t.hrtime(d)),v.status,r,n),!w.error){e.next=26;break}throw new Error("LastFM: ".concat(w.message));case 26:for(O=x.length,T=new Array(O>2?O-2:0),j=2;j<O;j++)T[j-2]=x[j];return k=T.reduce(function(t,e){return t[e]},w),c&&this.cache.put(s,k),e.abrupt("return",k);case 30:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()}]),e}()}).call(this,r(9))},,,function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return s});var n=r(14);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,c(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,n["a"]),function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(e,[{key:"getArtistInfo",value:function(t){var e=t.mbid,r=t.artist;return this.req("artist.getinfo",{mbid:e,artist:r},"artist")}},{key:"getArtistTopTags",value:function(t){return this.req("artist.gettoptags",{artist:t},"toptags","tag")}},{key:"getArtistTopAlbums",value:function(t){return this.req("artist.gettopalbums",{artist:t},"topalbums","album")}},{key:"getAlbumTopTags",value:function(t,e){return this.req("album.gettoptags",{artist:t,album:e},"toptags","tag")}},{key:"getSimilarArtists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.req("artist.getsimilar",{artist:t,autocorrect:1,limit:e},"similarartists","artist")}},{key:"getTagInfo",value:function(t){return this.req("tag.getInfo",{tag:t},"tag")}},{key:"getSimilarTags",value:function(t){return this.req("tag.getsimilar",{tag:t},"similartags","tag")}},{key:"getTagTopArtists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.req("tag.gettopartists",{tag:t,limit:e},"topartists","artist")}},{key:"getTagTopTracks",value:function(t){return this.req("tag.gettoptracks",{tag:t,limit:15},"tracks","track")}}]),e}()}])});